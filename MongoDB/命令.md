

**创建数据库**，如果不存在则创建，否则切换到指定数据库
`use DATABASE_NAME`


查看所有数据库
`show dbs`

如果是空数据库，就不会显示

向test数据库插入数据
`db.test.insert({"name": "hello"})`


默认数据库为test，如果没有创建新的数据库，集合将放在test数据库中

**删除数据库**
`db.dropDatabase()`
(删除当前数据库，默认为test)

常用删除的方法：
`show dbs` => `use test` => `db.dropDatabase()`



**删除集合**
`db.collection.drop()`
eg: 
```
use test

show tables

db.site.drop() // 集合名为site
```

**插入文档**(insert()/save())
`db.collection_name.insert(document)`

eg:
```
db.site.insert({
  title: '表头',
  content: '这是一篇文章',
  url: 'www.baidu.com'
})
```
没有该数据库，则自动创建，并插入数据

**查看已插入的文档**
`db.collection_name.find()`

```
3.2 版本后还有以下几种语法可用于插入文档:

 db.collection.insertOne():向指定集合中插入一条文档数据
 db.collection.insertMany():向指定集合中插入多条文档数据
#  插入单条数据

> var document = db.collection.insertOne({"a": 3})
> document
{
        "acknowledged" : true,
        "insertedId" : ObjectId("571a218011a82a1d94c02333")
}

#  插入多条数据
> var res = db.collection.insertMany([{"b": 3}, {'c': 4}])
> res
{
        "acknowledged" : true,
        "insertedIds" : [
                ObjectId("571a22a911a82a1d94c02337"),
                ObjectId("571a22a911a82a1d94c02338")
        ]
}
```


**更新文档**
`updata()`

```
db.collection.update(
        <query>,
        <update>,
        {
                upsert: <boolean>,
                multi: <boolean>,
                writeConcern: <document>
        }
)

query: update的查询条件
update: update的对象和一些更新的操作符
upsert: 可选，如果不存在update的记录，是否插入objNew,true为插入，默认false。
multi: 可选，默认false，只更新找到第一条记录，（true, 表示把所有符合条件的都更新）
writeConcern: 可选，抛出异常的级别
```

**删除文档**
`remove()`

在执行`remove()`前先执行`find()`判断执行条件是否正确

```
db.collection.remove(
        <query>, // 删除文档的条件
        {
                justOne: <boolean>, // 如果为true或1，则只删除一个文档
                writeConcern: <document> // 抛出异常的级别
        }
)
```

eg:
先插入两条数据
![_](https://github.com/Heisinadaze/mynotes/blob/master/MongoDB/Mongo.png)

remove
![_](https://github.com/Heisinadaze/mynotes/blob/master/MongoDB/Mongo_remove.png)

* 如果要删除所有数据
```
db.col.remove({})
```
![_](https://github.com/Heisinadaze/mynotes/blob/master/MongoDB/Mongo_remove_all.png)

remove已out,现在推荐`deleteOne()`,`deleteMany()` 方法同remove。


**查询文档**
`find()`

```
db.collection.find(query, projection);

query: 可选，使用查询操作符指定查询条件
projection: 可选， 使用投影操作符指定返回的键
```

* pretty() 以格式化的方式来显示文档
`db.collection.find().pretty()`

> `findOne()`只返回一个文档

|操作	|格式	|范例	|RDBMS中的类似语句|
|---|---|---|---|
|等于	|`{<key>:<value>}`|	db.col.find({"by":"菜鸟教程"}).pretty()|	where by = '菜鸟教程'|
|小于	|`{<key>:{$lt:<value>}}`|	db.col.find({"likes":{$lt:50}}).pretty()|	where likes < 50|
|小于或等于	|`{<key>:{$lte:<value>}}`|	db.col.find({"likes":{$lte:50}}).pretty()|	where likes <= 50|
|大于	|`{<key>:{$gt:<value>}}`|	db.col.find({"likes":{$gt:50}}).pretty()|	where likes > 50|
|大于或等于	|`{<key>:{$gte:<value>}}`|	db.col.find({"likes":{$gte:50}}).pretty()|	where likes >= 50|
|不等于	|`{<key>:{$ne:<value>}}`|	db.col.find({"likes":{$ne:50}}).pretty()|	where likes != 50|


* &&

```
db.col.find({key1:value1,key2:value2}).pretty()
```
* || 或

```
db.col.find({
        $or: [
                {key1: value1},
                {key2: value2}
        ]
})
```
eg: 查询键 by 值为 菜鸟教程 或键 title 值为 MongoDB 教程 的文档。
> db.col.find({$or:[{"by":"菜鸟教程"},{"title": "MongoDB 教程"}]}).pretty()

第二个参数

```
db.collection.find(query, {title: 1, by: 1}) // inclusion模式 指定返回的键，不返回其他键
db.collection.find(query, {title: 0, by: 0}) // exclusion模式 指定不返回的键,返回其他键

_id 键默认返回，需要主动指定 _id:0 才会隐藏

db.collection.find(query, {_id:0, title: 1, by: 1})
```





















