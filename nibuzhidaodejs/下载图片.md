
## 调用浏览器自带的下载

```
var $a = document.createElement('a')
$a.setAttribute('href', this.url)
$a.setAttribute('download', '')
var evObj = document.createEvent('MouseEvents')
evObj.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, true, false, 0, null)
$a.dispatchEvent(evObj)
```


## a标签

```
      var canvas = document.getElementById('canvas')
      var ctx = canvas.getContext('2d')
      var image = new Image()
      image.crossOrigin = '*'
      image.onload = function () {
        ctx.drawImage(image, 0, 0)
        let url = canvas.toDataURL('image/png')
        var a = document.createElement('a')
        var event = new MouseEvent('click')
        a.download = name || '下载图片名称'
        a.href = url
        a.dispatchEvent(event)
      }
      image.src = this.url

```

或

```
      var canvas = document.getElementById('canvas')
      var ctx = canvas.getContext('2d')
      var image = new Image()
      image.crossOrigin = '*'
      image.onload = function () {
        ctx.drawImage(image, 0, 0)
        let url = canvas.toDataURL('image/png').replace('image/png', 'image/octet-stream')

        window.location.href = url
      }
      image.src = this.info.icode
```






