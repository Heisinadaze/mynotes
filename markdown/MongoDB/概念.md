
## Mongodb 概念

文档型数据库


| SQL术语/概念 |	MongoDB术语/概念 | 解释/说明 |
| --- | --- | --- |
|database |	database | 数据库 |
|table | collection	| 数据库表/集合 |
|row | document	| 数据记录行/文档 |
|column |	field	| 数据字段/域 |
|index | index	| 索引 |
|table joins |  	| 	表连接,MongoDB不支持 |
|primary key	| primary key	| 主键,MongoDB自动将_id字段设置为主键 |


### 数据库

> 一个mongodb中可以建立多个数据库。

> MongoDB的默认数据库为"db"，该数据库存储在data目录中。

> MongoDB的单个实例可以容纳多个独立的数据库，每一个都有自己的集合和权限，不同的数据库也放置在不同的文件中

> Mongodb的命令行  "show dbs" 命令可以显示所有数据的列表。

> 执行 "db" 命令可以显示当前数据库对象或集合。

> 运行"use"命令，可以连接到一个指定的数据库。



### 数据库命名

* 不能是空字符串
* 不含特殊字符， 0， $, / ...
* 全部小写
* 最多64字节
* utf-8字符串

#### 保留 数据库(可以直接访问)

* admin: root

* local: 用来存储限于本地单台服务器的任意集合

* config: 当Mongo用于分片设置时，config数据库在内部使用，用于保存分片的相关信息。


## 文档


|RDBMS	| MongoDB |
| --- | --- |
|数据库 |	数据库|
|表格	| 集合|
|行	| 文档|
|列	| 字段|
|表联合	| 嵌入文档|
|主键 |	主键 (MongoDB 提供了 key 为 _id )|

  数据库服务和客户端
  | 数据库服务和客户端 | 数据库服务和客户端 |
  | --- | --- |
|Mysqld/Oracle|	mongod|
|mysql/sqlplus|	mongo|

> 文档是一组键值(key-value)对(即BSON)。MongoDB 的文档不需要设置相同的字段，并且相同的字段不需要相同的数据类型，这与关系型数据库有很大的区别，也是 MongoDB 非常突出的特点。

```
{"site":"www.baidu.com", "name":"百度"}
```

* 文档中的键/值对是有序的。

* 文档中的值不仅可以是在双引号里面的字符串，还可以是其他几种数据类型（甚至可以是整个嵌入的文档)。

* MongoDB区分类型和大小写。

* MongoDB的文档不能有重复的键。

* 文档的键是字符串。除了少数例外情况，键可以使用任意UTF-8字符。


#### 文档键命名规范：

* 键不能含有\0 (空字符)。这个字符用来表示键的结尾。

* `.`和`$`有特别的意义，只有在特定环境下才能使用。

* 以下划线`_`开头的键是保留的(不是严格要求的)。



## 数据类型

| 数据类型	| 描述 |
|--- | --- |
| String |	字符串。存储数据常用的数据类型。在 MongoDB 中，UTF-8 编码的字符串才是合法的。|
| Integer |	整型数值。用于存储数值。根据你所采用的服务器，可分为 32 位或 64 位。|
| Boolean |	布尔值。用于存储布尔值（真/假）。|
| Double | 	双精度浮点值。用于存储浮点值。|
|Min/Max keys	| 将一个值与 BSON（二进制的 JSON）元素的最低值和最高值相对比。|
|Array	| 用于将数组或列表或多个值存储为一个键。|
| Timestamp	| 时间戳。记录文档修改或添加的具体时间。|
| Object |	用于内嵌文档。|
| Null |	用于创建空值。|
| Symbol |	符号。该数据类型基本上等同于字符串类型，但不同的是，它一般用于采用特殊符号类型的语言。|
| Date |	日期时间。用 UNIX 时间格式来存储当前日期或时间。你可以指定自己的日期时间：创建 Date 对象，传入年月日信息。|
| Object ID |	对象 ID。用于创建文档的 ID。|
| Binary Data |	二进制数据。用于存储二进制数据。|
| Code |	代码类型。用于在文档中存储 JavaScript 代码。|
| Regular expression |	正则表达式类型。用于存储正则表达式。|


## Mongodb连接

```
Mongodb://admin:123456@localhost/test

test: 数据库名

没有的部分可以省略
```

连接到本地默认的数据库
```
Mongodb://localhost
```

连接两个服务器的时候
```
mongodb://example1:27017,example2.com:27017
```

连接三台服务器

```
mongodb://localhost,localhost:27018,localhost:27019
```

连接三台服务器, 写入操作应用在主服务器 并且分布查询到从服务器。
```
mongodb://host1,host2,host3/?slaveOK=true
```

安全模式连接到localhost
```
mongodb://localhost/safe=true
```

以安全模式连接到replica set，并且等待至少两个复制服务器成功写入，超时时间设置为2秒。
```
mongodb://host1,host2,host3/?safe=true;w=2;wtimeoutMS=2000
```




